{"version":3,"file":"mdb-angular-ui-kit-collapse.umd.js","sources":["../../../projects/mdb-angular-ui-kit/collapse/collapse.directive.ts","../../../projects/mdb-angular-ui-kit/collapse/collapse.module.ts","../../../projects/mdb-angular-ui-kit/collapse/mdb-angular-ui-kit-collapse.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { fromEvent } from 'rxjs';\nimport { take } from 'rxjs/operators';\n\nconst TRANSITION_TIME = 350;\n\n@Directive({\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: '[mdbCollapse]',\n  exportAs: 'mdbCollapse',\n})\n// eslint-disable-next-line @angular-eslint/component-class-suffix\nexport class MdbCollapseDirective {\n  constructor(private _elementRef: ElementRef, private _renderer: Renderer2) {}\n\n  @HostBinding('class.collapse') collapseClass = true;\n\n  @Output() collapseShow: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseShown: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseHide: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n  @Output() collapseHidden: EventEmitter<MdbCollapseDirective> = new EventEmitter();\n\n  @Input()\n  set collapsed(collapsed: boolean) {\n    if (collapsed !== this._collapsed) {\n      collapsed ? this.hide() : this.show();\n      this._collapsed = collapsed;\n    }\n  }\n  get collapsed(): boolean {\n    return this._collapsed;\n  }\n  private _collapsed = true;\n\n  get host(): HTMLElement {\n    return this._elementRef.nativeElement;\n  }\n\n  private _isTransitioning = false;\n\n  show(): void {\n    if (this._isTransitioning || !this.collapsed) {\n      return;\n    }\n\n    this.collapseShow.emit(this);\n\n    this._renderer.removeClass(this.host, 'collapse');\n    this._renderer.addClass(this.host, 'collapsing');\n\n    this._renderer.setStyle(this.host, 'height', '0px');\n\n    this._isTransitioning = true;\n\n    const scrollHeight = this.host.scrollHeight;\n\n    fromEvent(this.host, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        this._isTransitioning = false;\n        this.collapsed = false;\n        this._renderer.removeClass(this.host, 'collapsing');\n        this._renderer.addClass(this.host, 'collapse');\n        this._renderer.addClass(this.host, 'show');\n\n        this._renderer.removeStyle(this.host, 'height');\n\n        this.collapseShown.emit(this);\n      });\n\n    this._emulateTransitionEnd(this.host, TRANSITION_TIME);\n\n    this._renderer.setStyle(this.host, 'height', `${scrollHeight}px`);\n  }\n\n  hide(): void {\n    if (this._isTransitioning || this.collapsed) {\n      return;\n    }\n\n    this.collapseHide.emit(this);\n\n    const hostHeight = this.host.getBoundingClientRect().height;\n\n    this._renderer.setStyle(this.host, 'height', `${hostHeight}px`);\n\n    this._reflow(this.host);\n\n    this._renderer.addClass(this.host, 'collapsing');\n    this._renderer.removeClass(this.host, 'collapse');\n    this._renderer.removeClass(this.host, 'show');\n\n    this._isTransitioning = true;\n\n    fromEvent(this.host, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        this._renderer.removeClass(this.host, 'collapsing');\n        this._renderer.addClass(this.host, 'collapse');\n        this._isTransitioning = false;\n        this.collapsed = true;\n\n        this.collapseHidden.emit(this);\n      });\n\n    this._renderer.removeStyle(this.host, 'height');\n    this._emulateTransitionEnd(this.host, TRANSITION_TIME);\n  }\n\n  toggle(): void {\n    if (this._isTransitioning) {\n      return;\n    }\n\n    this.collapsed = !this.collapsed;\n    this.collapsed ? this.hide() : this.show();\n  }\n\n  private _reflow(element: HTMLElement): number {\n    return element.offsetHeight;\n  }\n\n  private _emulateTransitionEnd(element: HTMLElement, duration: number): void {\n    let eventEmitted = false;\n    const durationPadding = 5;\n    const emulatedDuration = duration + durationPadding;\n\n    fromEvent(element, 'transitionend')\n      .pipe(take(1))\n      .subscribe(() => {\n        eventEmitted = true;\n      });\n\n    setTimeout(() => {\n      if (!eventEmitted) {\n        element.dispatchEvent(new Event('transitionend'));\n      }\n    }, emulatedDuration);\n  }\n}\n","import { MdbCollapseDirective } from './collapse.directive';\nimport { NgModule } from '@angular/core';\n\n@NgModule({\n  declarations: [MdbCollapseDirective],\n  exports: [MdbCollapseDirective],\n})\nexport class MdbCollapseModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["EventEmitter","fromEvent","take","Directive","ElementRef","Renderer2","HostBinding","Output","Input","NgModule"],"mappings":"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"}